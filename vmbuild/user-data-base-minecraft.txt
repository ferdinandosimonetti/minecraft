#cloud-config
groups:
  - minecraft
users:
  - default
  - name: ubuntu
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCpxUnP8vCro31Xt2EcSKc/qB+0S/32UudZOUbyySZveVStUD6TJ4+ZaqYFsdCYLjGHXyo7jyUuwgKMrtP14dHr71easmnhyxeDqNunN2nQMSoph2emspP6lZrH6w+XmWTsau7tSSh8y78Jeq0ebrt0gzGWGBQITxT3MsZ8WR+f1tYrkASNJyYckrbSB3vK34w+LTbsjSa52CVkXCAzbFf6oR/or9luVU9pdj/TnX+OXsMgcSpYeH8o5rAlyBhOFIio5wNXXYZlaBcKOs29xB4oWXjlKRwlz592TIYBIjHHJkXf3kJfZmy+y94aHCs/Ih9QROzR0VFGmxeTPRM+Kf1GbnB8+HyqRWNVpsnvZlPqikfIVU9dyGm1CcpPgwX+/BYs661PMfAZjqgR50Pte1nR+nq0TCQFHp/06px92fXuBVUO6/nl1lPCZqMGcT1jb7OTXk3NpqYnphaUNWhhRrSk7xmi/muYm+jzgZtabptXM2741fLo8QSLodSPrgy2CPE= ferdi@LAPTOP-S6G27617
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo, minecraft
    shell: /bin/bash

apt:
  sources:
    balocco-various:
      source: "deb http://ppa.launchpad.net/stefanobalocco/various/ubuntu bionic main"

package_update: true
package_upgrade: true

packages:
 - git
 - curl
 - wget
 - zip
 - unzip
 - screen
 - lsof
 - file
 - openjdk-8-jre-headless

runcmd:
  - swapoff --all
  - sed -ri '/\sswap\s/s/^#?/#/' /etc/fstab
  - 'echo "disable_vmware_customization: false" >> /etc/cloud/cloud.cfg'
  - sed -i 's/D \/tmp 1777 root root -/#D \/tmp 1777 root root -/g' /usr/lib/tmpfiles.d/tmp.conf
  - echo -n > /etc/machine-id
  - 'su - ubuntu -c "git clone https://github.com/ferdinandosimonetti/minecraft.git"'
final_message: "The system is prepped, after $UPTIME seconds"
power_state:
  timeout: 30
  mode: poweroff